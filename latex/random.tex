\chapter{El módulo random}

\Needspace{8\baselineskip}
\section{El módulo random}

El módulo \ttt{random} pertenece a la biblioteca estándar y contiene funciones para generar números pseudoaleatorios.

\pythonfile{codigo/11-random/import_random.py}

Los números generados son pseudoaleatorios porque la aleatoriedad \doble{natural} no existe en los computadores.
Todas las funciones que generan elementos al azar en realidad emplean algoritmos muy difíciles de calcular o de predecir en el poco tiempo que tardan en retornar un resultado.

La mayoría de ejemplos de código en este capítulo tienen resultados variables, es decir, cada vez que se ejecute el código los resultados serán distintos.
La excepción a esta regla es cuando se especifica una semilla.

\Needspace{8\baselineskip}
\section{La función random()}

La función \ttt{random()} genera un float aleatorio entre \ttt{0} y \ttt{1}.

\pythonfile{codigo/11-random/random_1.py}
\out{codigo/11-random/random_1.out}

Para mostrar su funcionamiento mejor, se puede usar dentro de un bucle.

\pythonfile{codigo/11-random/random_2.py}
\out{codigo/11-random/random_2.out}

%TODO: más floats

\Needspace{8\baselineskip}
\section{Generación de números enteros}

Para generar un número entero aleatorio se puede usar la función \ttt{randint()}.
A esta función se le deben entregar el número mínimo y el número máximo como parámetros.

Se puede usar para simular el lanzamiento de un dado.

\pythonfile{codigo/11-random/randint_1.py}
\out{codigo/11-random/randint_1.out}

O lanzamientos de múltiples dados.

\pythonfile{codigo/11-random/randint_2.py}
\out{codigo/11-random/randint_2.out}

Alternativamente, se puede usar la función \ttt{randrange()}, que entrega el mismo resultado, pero usa los parámetros de un objeto de tipo \ttt{range}.
Esto significa que el número máximo será el antecesor del segundo parámetro.

\pythonfile{codigo/11-random/randrange.py}
\out{codigo/11-random/randrange.out}

\Needspace{8\baselineskip}
\section{Generación de números racionales}

La función \ttt{random()} sirve para generar un float entre \ttt{0} y \ttt{1}.
Este resultado se puede modificar con operaciones para obtener resultados dentro de un rango específico.

%TODO: ejemplo de esto

Pero puede resultar más fácil utilizar la función \ttt{uniform()}, que requiere 2 argumentos al igual que \ttt{randint}, pero genera un número de tipo float.

\pythonfile{codigo/11-random/uniform.py}
\out{codigo/11-random/uniform.out}

\Needspace{8\baselineskip}
\section{Semillas}

%TODO: enlace a semilla
Una semilla es un valor predefinido que se le entrega al algoritmo generador de números aleatorios.

Por defecto, la semilla es la hora actual del sistema en el que se ejecuta el algoritmo, pero se puede cambiar usando el método \ttt{seed()}.

\pythonfile{codigo/11-random/seed_1.py}
\out{codigo/11-random/seed_1.out}

El resultado obtenido en este caso siempre será el mismo, ya que se le entregó la semilla inicial \ttt{10}.

Sin importar cuantas veces se repita, el primer resultado siempre será igual para una misma semilla.

\pythonfile{codigo/11-random/seed_2.py}
\out{codigo/11-random/seed_2.out}

El resto de resultados también serán iguales, y se repetirán en el mismo orden.

\pythonfile{codigo/11-random/seed_3.py}
\out{codigo/11-random/seed_3.out}

La misma semilla se usará con todos los métodos del módulo \ttt{random}.

Los argumentos que se le entregan a funciones como \ttt{randint()} no influyen en el resultado obtenido con la semilla, sólo lo ajustan al rango.

\pythonfile{codigo/11-random/seed_4.py}
\out{codigo/11-random/seed_4.out}
\pythonfile{codigo/11-random/seed_5.py}
\out{codigo/11-random/seed_5.out}

\Needspace{8\baselineskip}
\section{Generación de listas aleatorias}

No existe una función para generar listas con números aleatorios, pero se puede realizar esta acción usando un bucle \ttt{for}.

\pythonfile{codigo/11-random/lista_enteros.py}
\out{codigo/11-random/lista_enteros.out}
\pythonfile{codigo/11-random/lista_floats.py}
\out{codigo/11-random/lista_floats.out}

Otra forma de generar listas de números enteros aleatorios es usando la función \ttt{sample()}.

\pythonfile{codigo/11-random/lista_sample.py}
\out{codigo/11-random/lista_sample.out}

\Needspace{8\baselineskip}
\section{Elementos al azar de secuencias}

El módulo \ttt{random} también tiene métodos para trabajar aleatoriamente con secuencias (como cadenas de texto y listas).

El método \ttt{choice()} retorna un elemento aleatorio de una secuencia.

\pythonfile{codigo/11-random/choice_1.py}
\out{codigo/11-random/choice_1.out}
\pythonfile{codigo/11-random/choice_2.py}
\out{codigo/11-random/choice_2.out}

La función \ttt{sample()} obtiene una muestra aleatoria de una secuencia.
Se le debe especificar el tamaño de la muestra en el segundo argumento.
La secuencia original no cambia.

\pythonfile{codigo/11-random/sample.py}
\out{codigo/11-random/sample.out}

No se pueden tomar muestras de tamaño superior al tamaño de la población (secuencia) o de tamaño negativo.

\pythonfile{codigo/11-random/error_sample_1.py}
\out{codigo/11-random/error_sample_1.out}
\pythonfile{codigo/11-random/error_sample_2.py}
\out{codigo/11-random/error_sample_2.out}

El método \ttt{shuffle()} desordena una secuencia, y vuelve a armarla ordenándola al azar.
Cambia la lista original, no retorna una nueva.

\pythonfile{codigo/11-random/shuffle.py}
\out{codigo/11-random/shuffle.out}

% TODO: se le puede entregar una función como segundo parámetro

La función \ttt{choices()} permite seleccionar elementos de una lista al azar \ttt{k} veces.
Esta acción se realiza \doble{con reposición}), o sea, despues de seleccionar un elemento este elemento seguirá en la lista.
Este número puede ser mayor al número de elementos de la lista.

\pythonfile{codigo/11-random/choices_1.py}
\out{codigo/11-random/choices_1.out}

Todos los elementos tendrán la misma probabilidad de ser escogidos.

Se le puede entregar el argumento \ttt{weights} para hacer que cada elemento tenga su propia probabilidad de ser escogido, por ejemplo un dado trucado.

\pythonfile{codigo/11-random/dado_trucado.py}
\out{codigo/11-random/dado_trucado.out}

Los números dentro de la lista \ttt{weights} representan el peso de cada elemento de la secuencia, y deben tener la misma medida.

Los números pueden escribirse en cualquier escala, ya que se comparan entre ellos para determinar la razón en la que se encuentran los pesos.
Todos los ejemplos que se muestran a continuación son equivalentes.

\pythonfile{codigo/11-random/choices_2.py}
\out{codigo/11-random/choices_2.out}

Por último, en vez de \ttt{weights} puede usarse \ttt{cum\_weights}, para indicar los pesos acumulados.

\pythonfile{codigo/11-random/choices_3.py}
\out{codigo/11-random/choices_3.out}

\Needspace{8\baselineskip}
\section{Distribuciones de probabilidad}

El módulo \ttt{random} también contiene funciones para generar números al azar siguiendo ciertas distribuciones de probabilidad.

%TODO: enlaces a todas las distribuciones, para los curiosos

La función \ttt{uniform()} retorna un float que sigue la \link{https://es.wikipedia.org/wiki/Distribuci\%C3\%B3n\_uniforme\_continua}{distribución uniforme}, que se encuentra entre 2 valores.

\pythonfile{codigo/11-random/uniforme.py}

La función \ttt{triangular()} retorna un float que sigue la \link{https://es.wikipedia.org/wiki/Distribuci\%C3\%B3n\_triangular}{distribución triangular}, que se encuentra entre 2 valores y se le puede entregar el parámetro \ttt{mode} (valor más probable).
Si no se le entrega este argumento, \ttt{mode} será el punto medio.

\pythonfile{codigo/11-random/triangular.py}

El resto de distribuciones no serán detalladas, ya que su uso es más específico, pero se mostrará el nombre de cada una y el nombre de la función para generar floats al azar que la sigan.

\begin{itemize}
    \item \link{https://es.wikipedia.org/wiki/Distribuci\%C3\%B3n\_beta}{Distribución beta}: \ttt{betavariate()}
    
    \item \link{https://es.wikipedia.org/wiki/Distribuci\%C3\%B3n\_exponencial}{Distribución exponencial}: \ttt{expovariate()}
    
    \item \link{https://es.wikipedia.org/wiki/Distribuci\%C3\%B3n\_gamma}{Distribución gamma}: \ttt{gammavariate()}
    
    \item \link{https://es.wikipedia.org/wiki/Distribuci\%C3\%B3n\_log-normal}{Distribución log-normal}: \ttt{lognormvariate()}
    
    \item \link{https://es.wikipedia.org/wiki/Distribuci\%C3\%B3n\_normal}{Distribución normal}: \ttt{normalvariate()} y \ttt{gauss()}
    
    \item \link{https://en.wikipedia.org/wiki/Von\_Mises\_distribution}{Distribución de von Mises}: \ttt{vonmisesvariate()}
    
    \item \link{https://es.wikipedia.org/wiki/Distribuci\%C3\%B3n\_de\_Pareto}{Distribución de Pareto}: \ttt{paretovariate()}
    
    \item \link{https://es.wikipedia.org/wiki/Distribuci\%C3\%B3n\_de\_Weibull}{Distribución de Weibull}: \ttt{weibullvariate()}
\end{itemize}

Se puede usar la función \ttt{help()} para buscar los parámetros de cada una.

\clearpage